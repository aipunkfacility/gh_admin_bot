# üìã –ü—Ä–æ–µ–∫—Ç–Ω—ã–π –ë—ç–∫–ª–æ–≥ (Backlog)

**–°—Ç–∞—Ç—É—Å**: –û—á–µ—Ä–µ–¥—å –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

## ÔøΩ –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (Critical / High)

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ HTTPS –¥–ª—è –∫–∞—Ä—Ç–∏–Ω–æ–∫

- **–ó–∞—á–µ–º**: Telegram –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∫–∞—Ä—Ç–∏–Ω–∫–∏ —Å HTTP —Å—Å—ã–ª–æ–∫ (–æ—à–∏–±–∫–∞ "wrong type of web page content").
- **–ó–∞–¥–∞—á–∞**:
  - [ ] –ö—É–ø–∏—Ç—å –¥–æ–º–µ–Ω–Ω–æ–µ –∏–º—è.
  - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å DNS (A-–∑–∞–ø–∏—Å—å –Ω–∞ `85.198.68.12`).
  - [ ] –ü–æ–ª—É—á–∏—Ç—å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (Let's Encrypt / Certbot).
  - [ ] –û–±–Ω–æ–≤–∏—Ç—å Nginx –∫–æ–Ω—Ñ–∏–≥.

### 2. Graceful Shutdown

- **–ó–∞—á–µ–º**: –ß—Ç–æ–±—ã –Ω–µ —Ç–µ—Ä—è—Ç—å —Ç–µ–∫—É—â–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ.
- **–ó–∞–¥–∞—á–∞**:
  - [ ] –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É `SIGINT`/`SIGTERM` –≤ `scripts/poll.js`.
  - [ ] –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∞–º –æ —Ä–µ—Å—Ç–∞—Ä—Ç–µ.
  - [ ] –û–∂–∏–¥–∞—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç–µ–∫—É—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–µ—Ä–µ–¥ –≤—ã—Ö–æ–¥–æ–º.

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥ –∏ –£–ª—É—á—à–µ–Ω–∏—è (Improvements)

### 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ Action Handlers

- **–ó–∞—á–µ–º**: –ß—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤–∏–¥–µ–ª "–≤–µ—á–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É" –ø—Ä–∏ —Å–±–æ–µ.
- **–ó–∞–¥–∞—á–∞**:
  - [ ] –û–±–µ—Ä–Ω—É—Ç—å –æ—Å—Ç–∞–≤—à–∏–µ—Å—è ~12 action handlers –≤ `try-catch` (—Å–µ–π—á–∞—Å —Å–¥–µ–ª–∞–Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö).
  - [ ] –û–±–µ—Ä–Ω—É—Ç—å `ctx.answerCbQuery()` –≤ `try-catch` (–∏–ª–∏ `.catch`) –≤–µ–∑–¥–µ.

### 4. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –ü–∞–≥–∏–Ω–∞—Ü–∏–∏

- **–ó–∞—á–µ–º**: –£–º–µ–Ω—å—à–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞.
- **–ó–∞–¥–∞—á–∞**:
  - [ ] –í—ã–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É —Å–æ–∑–¥–∞–Ω–∏—è –∫–Ω–æ–ø–æ–∫ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –∏ "–ù–∞–∑–∞–¥" –≤ –æ–±—â—É—é —É—Ç–∏–ª–∏—Ç—É `buildPaginationKeyboard`.
  - [ ] –ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤ `Transport`, `Excursions`, `Accommodations`.

### 5. –£–ª—É—á—à–µ–Ω–∏—è UX

- **–ó–∞–¥–∞—á–∞**:
  - [ ] **–ü—É—Å—Ç—ã–µ —Å–ø–∏—Å–∫–∏**: –í—ã–≤–æ–¥–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ "–í —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ–∫–∞ –ø—É—Å—Ç–æ", –µ—Å–ª–∏ JSON –≤–µ—Ä–Ω—É–ª –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤.
  - [ ] **–û—Ç–º–µ–Ω–∞ —Å—Ü–µ–Ω—ã**: –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É `/cancel` –∏ –∫–Ω–æ–ø–∫—É "–û—Ç–º–µ–Ω–∞" –≤ `WizardScene` (–æ–±–º–µ–Ω –≤–∞–ª—é—Ç), —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –≤—ã–π—Ç–∏ –Ω–∞ –ª—é–±–æ–º —à–∞–≥–µ.

## üöÄ –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (Features)

### 6. Health Check

- **–ó–∞—á–µ–º**: –î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏.
- **–ó–∞–¥–∞—á–∞**:
  - [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ—Å—Ç–æ–π HTTP endpoint `/health` –≤ `scripts/poll.js` (—á–µ—Ä–µ–∑ `http.createServer`).
  - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å UptimeRobot –∏–ª–∏ –∞–Ω–∞–ª–æ–≥.

### 7. –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è (i18n)

- **–ó–∞—á–µ–º**: –ß—Ç–æ–±—ã –ª–µ–≥–∫–æ –º–µ–Ω—è—Ç—å —Ç–µ–∫—Å—Ç—ã –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –∞–Ω–≥–ª. —è–∑—ã–∫.
- **–ó–∞–¥–∞—á–∞**:
  - [ ] –í—ã–Ω–µ—Å—Ç–∏ –≤—Å–µ —Ç–µ–∫—Å—Ç—ã –∏–∑ –∫–æ–¥–∞ –≤ `src/lib/bot/locales/ru.json`.
  - [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É `telegraf-i18n` –∏–ª–∏ —Å–≤–æ—é –ø—Ä–æ—Å—Ç—É—é —É—Ç–∏–ª–∏—Ç—É.

### 8. –†–µ–¥–∞–∫—Ç–æ—Ä –ø–æ—Å—Ç–æ–≤ –¥–ª—è –±–æ—Ç–∞

- **–ó–∞—á–µ–º**: –£–ø—Ä–∞–≤–ª—è—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º –±–æ—Ç–∞ (—Ç–µ–∫—Å—Ç + —Ñ–æ—Ç–æ) –∏–∑ –∞–¥–º–∏–Ω–∫–∏.
- **–ó–∞–¥–∞—á–∞**:
  - [ ] –î–æ–±–∞–≤–∏—Ç—å –≤–∫–ª–∞–¥–∫—É "–ü–æ—Å—Ç –≤ –±–æ—Ç–µ" –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä —Ç–æ–≤–∞—Ä–∞.
  - [ ] –°–æ—Ö—Ä–∞–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç–∞ –≤ `public/data/bot-posts.json` (–æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç –æ—Å–Ω–æ–≤–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö).
  - [ ] –§–æ—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ `public/images/bot/`.

### 9. –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö: JSON -> Supabase

- **–ü—Ä–∏—á–∏–Ω–∞**: –ü–æ–≤—ã—à–µ–Ω–∏–µ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ (ACID), –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤, Realtime –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã–µ —Å–≤—è–∑–∏.
- **–ü–ª–∞–Ω**:
  1. –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –≤ Supabase.
  2. –°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ö–µ–º—É –ë–î (–¢–∞–±–ª–∏—Ü—ã: Excursions, Transport, Services, Orders –∏ —Ç.–¥.).
  3. –ù–∞–ø–∏—Å–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ JSON.
  4. –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –≤ `src/pages/api` –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `@supabase/supabase-js`.
  5. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å RLS (–ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞).

## üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—É—Ç–µ–π –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (Path Fixes)

- [ ] **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ–ø–µ—á–∞—Ç–∫—É**: `servises` -> `services`.
- [ ] **–£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è**: –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ø–∞–ø–∫–∏ (`rentals` vs `transport`).
- [ ] **–ñ–∏–ª—å–µ**: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –≤ `uploads` -> –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤ `hotels` (–∏—Å–ø—Ä–∞–≤–∏—Ç—å JSON).
